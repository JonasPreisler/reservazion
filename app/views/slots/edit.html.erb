<%= render 'reservations/lang' %>

<center>
<%= simple_form_for(@slot, :html => {:class=> "myForm"}) do |f| %>
  <%= f.error_notification %>
  <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>


    <%= image_tag ('/tables.png'), class: 'responsive' %>

    <br />
    <br />
    <%= I18n.t 'table' %>
    <br />
    <br />


    <input type="hidden" value="<%= @slot.id %>" name="id">


	<% Table.all.each do |rt| %>
	  <label class="btn btn-primary slot_check <%= 'box5' if @slot.table_id != rt.id %> <%= 'reserved' if @slot.table_id == rt.id %>" for="slot_table_id_<%=rt.id%>">
	    <%= f.radio_button :table_id, rt.id %>
	    <span><%= rt.id %> <span style="font-size: 12px;"><%= 'RESERVADO' if @slot.table_id == rt.id %></span></span>
	  </label>
	<% end %>
    <br />
    <br />
    <br />

	<div class="form-actions">
	  <%= f.submit class: 'btn-submit box2', :name=>'commit' %>
  </div>
<% end %>
<%= link_to 'Back', root_path %>
</center>

<script type="text/javascript">
$(".slot_check").click(function(){
  $(".slot_check").removeClass('active');
  $(this).addClass('active');
});

</script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
  <script>
  
$(window).on("beforeunload", function() {
  return "Are you sure? You didn't finish the reservation!";
});

$(document).ready(function() {
  $("#myForm").on("submit", function(e) {
    //check form to make sure it is kosher
    //remove the ev
    $(window).off("beforeunload");
    return true;
  });
});
</script>